# Учебный проект по разработке функций для банковского приложения

## Цель проекта

Разработка функций для банковского приложения:

1. Маскирование номера карты или счета
2. Получение форматированной даты из входных данных
3. Фильтрация данных по статусу выполнения операций
4. Сортировка данных по дате выполнения операций

## Инструкция по установке

1. Выполнить клонирование репозитория Home_work_module_2 себе на компьютер
2. В терминале, находясь в корневой папке проекта, активировать виртуальное окружение через poetry командой:  
   `poetry shell`
3. В случае отсутствия менеджера проектов _poetry_, выполнить создание и активацию виртуального окружения командами:  
   `python -m venv .venv`  
   `venv\Scripts\activate.bat` - для Windows  
   `source venv/bin/activate` - для Linux и MacOS  
   Выполнить установку пакетов средствами _pip_ из списка зависимостей в файле _pyproject.toml_

## Запуск приложения

python main.py - из корня репозитория проекта
python <_path_>main.py - из другой папки  
<_path_> - путь к файлу main.py проекта Home_work_module_2

## Описание функций и примеры их работы

### Модуль masks.py

1. `get_mask_card_number`
   функция принимает на вход номер карты в виде числа и возвращает маску номера по правилу
   _XXXX XX** **** XXXX_
2. `get_mask_account`
   функция принимает на вход номер счета в виде числа и возвращает маску номера по правилу
   _**XXXX_

### Модуль widget.py

1. `mask_account_card`
   функция принимает один аргумент - строку, содержащую тип и номер карты или счета.
   Возвращает строку с замаскированным номером. Расширение функционала модуля *masks.py*.
   Получение входных данных с типом и номером карты или счета и вывод информации о карте или счете в замаскированном
   виде
2. `get_date`
   функция принимает на вход строку с датой в формате *"2024-03-11T02:26:18.671407"*
   и возвращает строку с датой в формате *"ДД.ММ.ГГГГ"*

### Модуль processing.py

1. `filter_by_state`
   функция принимает список словарей и опционально значение для ключа state (по умолчанию _'EXECUTED'_).
   Функция возвращает новый список словарей, содержащий только те словари,
   у которых ключ state соответствует указанному значению
2. `sort_by_date`
   функция принимает список словарей и необязательный параметр, задающий порядок сортировки (по умолчанию — убывание).
   Функция должна возвращать новый список, отсортированный по дате (date)

### Модуль main.py

Проверка работоспособности функций

### Пример использования функций

Работа функции маскирования номера карты:  
Входные данные:  
_Введите тип и номер карты или счет с номером: Visa 1232145695214587_  
Visa 1232 14** **** 4587

Работа функции маскирования номера счета:  
_Введите тип и номер карты или счет с номером: Счет 21232565215236547895_  
Счет **7895

Выход функции форматирования даты из строки в формате _"2024-03-11T02:26:18.671407"_  
11.03.2024

Входные данные для фильтрации:

```python 
([
    {"id": 41428829, "state": "EXECUTED", "date": "2019-07-03T18:35:29.512364"},
    {"id": 939719570, "state": "EXECUTED", "date": "2018-06-30T02:08:58.425572"},
    {"id": 594226727, "state": "CANCELED", "date": "2018-09-12T21:27:25.241689"},
    {"id": 615064591, "state": "CANCELED", "date": "2018-10-14T08:21:33.419441"}
])
```

Выход функции фильтрации данных по ключу _"state"_ _"EXECUTED"_

```python 
[
    {'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
    {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}
]
```

Входные данные для сортировки:

```python 
([
     {"id": 41428829, "state": "EXECUTED", "date": "2019-07-03T18:35:29.512364"},
     {"id": 939719570, "state": "EXECUTED", "date": "2018-06-30T02:08:58.425572"},
     {"id": 594226727, "state": "CANCELED", "date": "2018-09-12T21:27:25.241689"},
     {"id": 615064591, "state": "CANCELED", "date": "2018-10-14T08:21:33.419441"}
 ],
 false)
```

Выход функции сортировки:

```python 
[
    {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'},
    {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
    {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'},
    {'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}
]
```
## Тестирование
Функции тестирования расположены в пакете /tests
Запуск тестирования командой:   
```python
pytest --cov=src --cov-report=html
```
Просмотр результатов тестирования в папке проекта _htmlcov_ файл _index.html_